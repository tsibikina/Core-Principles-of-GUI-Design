# Лабораторная работа 4: Графический редактор с двойной системой сохранения
Мощное и гибкое приложение для рисования, созданное на связке Python (PyQt5) и QML. Приложение демонстрирует современный подход к разработке десктопных программ с четким разделением логики и интерфейса, а также реализует продвинутую систему сохранения работ.

## Функциональность

- Инструменты рисования

*Выбор цвета*: 4 предустановленных цвета (красный, зеленый, синий, черный) для быстрого доступа.

<img width="550" height="101" alt="image" src="https://github.com/user-attachments/assets/4ee5d3a0-bf45-4f73-a720-2a772a106562" />

*Настройка толщины*: Регулировка толщины линии от 1 до 5 пикселей с помощью удобного интерфейса.

<img width="288" height="59" alt="image" src="https://github.com/user-attachments/assets/7023627a-28d7-4827-b523-9ee94c134030" />

*Плавное рисование*: Реалистичная отрисовка линий с закругленными краями.

<img width="896" height="732" alt="image" src="https://github.com/user-attachments/assets/beade316-a066-4766-acb6-39f3dca9bf13" />


-  Двойная система сохранения

*Умное автосохранение (Smart Autosave)*

1) Фоновый процесс: Каждые 30 секунд состояние холста автоматически сохраняется.

2) Один файл: Данные сохраняются в файл autosave_backup.png, который постоянно перезаписывается.

*История сохранений (Save History)*

1) Ручное и автоматическое: Сохранения можно создавать вручную или по таймеру (выбирается из выпадающего списка: 30 сек, 1 мин, 5 мин, 10 мин).

2) Хранение в JSON: Все сохранения хранятся в файле saves.json в виде Base64-кодированных изображений.

3) Визуальная история: Правая панель интерфейса отображает миниатюры всех сохранений с метками времени.

4) Быстрая загрузка: Клик по любой миниатюре в истории мгновенно загружает это состояние на холст, позволяя легко сравнивать и откатываться к нужным версиям.

- Управление холстом

*Очистка*: Кнопка "Очистить" мгновенно стирает все нарисованное с холста.

*Статус сохранения*: Нижняя строка состояния информирует пользователя о последнем выполненном действии (ручном сохранении).

## Технологии

Python 3.9+: Основной язык программирования для бэкенда.

PyQt5: Мощный фреймворк для создания десктопных приложений.

PyQt5.QtCore: Основные классы (QObject, QTimer, QAbstractListModel).

PyQt5.QtGui: Классы для управления приложением (QGuiApplication).

PyQt5.QtQml: Интеграция с QML (QQmlApplicationEngine).

QML: Декларативный язык для описания пользовательского интерфейса. Позволяет создавать гибкие и анимированные UI с минимальным количеством кода.

JSON: Формат для хранения истории сохранений.

Base64: Метод кодирования бинарных данных изображения в текстовый формат для хранения в JSON.

## Структура проекта

Проект имеет модульную структуру, что упрощает его поддержку и расширение.
lab_4/

├── main_complete.py <-- Главный бэкенд (Python)

├── mainWindow.qml <-- Главный интерфейс (QML)

├── Circle.qml <-- Переиспользуемый компонент кнопки толщины

├── Square.qml <-- Переиспользуемый компонент кнопки цвета

├── image/ <-- Папка для сохранений (создается автоматически)

│ ├── saves.json <-- Файл истории

│ └── autosave_backup.png <-- Файл бэкапа

└── README.md <-- Этот файл

## Приложение построено по архитектуре "фронтенд-бэкенд":

#### Бэкенд (main_complete.py):

- Содержит всю бизнес-логику.

- Класс DrawingBackend управляет данными, сохранениями и взаимодействует с файловой системой.
  
- Класс SaveHistoryModel предоставляет данные для отображения в QML-списке.
  
- Экспонирует свои методы (слоты) и свойства (pyqtSlot, pyqtProperty) в QML для вызова из интерфейса.
  
#### Фронтенд (mainWindow.qml, Circle.qml, Square.qml):

- Отвечает исключительно за внешний вид и взаимодействие с пользователем.

- Canvas используется для отрисовки.

- При необходимости (например, сохранение) вызывает соответствующие слоты бэкенда (drawingBackend.saveCanvas(...)).

- Получает данные от бэкенда через сигналы (например, imageDataLoaded для загрузки сохранения).

  Выполнила: Цибикина Анастасия группа 6233


